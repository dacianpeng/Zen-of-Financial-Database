# Zen of Financial Database

## 一、金融数据总有时间戳

### eg

2022年进行 1990-2022 股票研究

假如遇到一家2010上市、2012退市的公司。应将该公司股票在2010-2012的数据纳入研究内

### eg.

2022年进行 2010-2022 混合型基金研究

假如遇到某一基金，2013年成立时为股票型基金，但在2021年变为了混合型基金，不应静态的将该基金视为混合型，应只将该基金2021-2022（变更后）的部分纳入研究

### eg.

使用专为时序特征优化的数据库（TSDB）

## 二、数据存在等级，可靠性逐级下降

进行一项金融研究，数据总是让人头疼，大部分时间花在了找数据、洗数据上，不如建立自己的数据库

尝试建立后，产生了一些对数据等级 `Data Hierarchy` 的想法

 ```mermaid
flowchart LR
A[(宿主机)]-->B1[(全集数据库)]
subgraph 事实层
direction LR
C0[(Level0)]-->C1[(Level1)]
end
subgraph 衍生层
direction LR
C2[(Level2)]-->C3[(Level3)]
C3[(Level3)]-->C4[(Level4)]
end
A-->B2[(常用数据库)]
B1-->事实层-->衍生层
 ```

#### Level 0

- 一手数据

    包括时间、交易所、标的代码、买1-买N、卖1-卖N、公司运营状态、财报信息等

#### Level 1

- 一手数据

    包括时间、交易所、标的代码、3秒OHLC等

- 二手数据

    或使用常用数据库的精确镜像、及更新脚本

#### Level 2

- 数据初步处理，变更索引、数据类型、勘误等

    统一标的名称（600000.SH/600000.XSHG/sh.600000）、统一同类日期名称（EndDate/EndDay/endDay）、统一同类数据数据类型（600000, string/float/int）等


#### Level 3

- 数据初步处理，变更、新增数据

    价格 --> 复权价格

    复权价格 --> 涨跌幅

#### Level 4

- 研究层面数据

    因子库等

#### 常用数据库

- 将常用的数据摘出来单独成库


## 三、查询和存储一样重要

### eg.

#### 存储时节约空间、查询时保证易用

- 利用缓存提高查询的速度

- 查询应包含“现在”的状态

    获取了第三季度的财报数据，数据库中标记为9月的信息，那么11月没有数据

    但查询时11月也应有财报数据，可以用三季度财报数据填充，也可以根据历史规律进行预测，而非NA

### eg.

#### 查询函数

参数至少包括

- 时间范围

- 标的范围

- 数据频率

##

欢迎补充，转载至其他平台请附[本仓库链接](https://github.com/dacianpeng/Zen-of-Financial-Database)

by Dacian Peng 2022-11
